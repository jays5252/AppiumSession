import org.openqa.selenium.remote.DesiredCapabilities;

import io.appium.java_client.android.AndroidDriver;

public class LoginButtonTest 
{
	private AndroidDriver<MobileElement> driver;

    @BeforeClass
    public void setUp() throws MalformedURLException {
        DesiredCapabilities caps = new DesiredCapabilities();

        caps.setCapability(MobileCapabilityType.PLATFORM_NAME, "Android");
        caps.setCapability(MobileCapabilityType.DEVICE_NAME, "YourDeviceName");
        caps.setCapability(MobileCapabilityType.AUTOMATION_NAME, "UiAutomator2");
        caps.setCapability(MobileCapabilityType.APP, "D:\\Path\\To\\Your.apk");
        caps.setCapability("appPackage", "com.zepthENT.app");
        caps.setCapability("appActivity", "com.zepthENT.app.MainActivity");
        caps.setCapability("autoGrantPermissions", true);

        driver = new AndroidDriver<>(new URL("http://127.0.0.1:4723/wd/hub"), caps);
        driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
    }

    @Test
    public void testLoginButtonText() {
        // Locate the login button (example ID)
        MobileElement loginButton = driver.findElementById("com.zepthENT.app:id/btnLogin");

        // Interact with it like a WebElement
        Assert.assertTrue(loginButton.isDisplayed(), "Login button should be visible");
        String actualText = loginButton.getText();
        String expectedText = "Login";

        Assert.assertEquals(actualText, expectedText, "Login button text should match");
        loginButton.click();
    }

    @AfterClass
    public void tearDown() {
        if (driver != null) {
            driver.quit();
        }
    }

}
